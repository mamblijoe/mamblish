FROM node:14.18-alpine
ARG APP_ENV
ARG SENTRY_DSN
ARG DB_CONNECTION
ARG DB_HOST
ARG DB_PORT
ARG DB_DATABASE
ARG DB_USERNAME
ARG DB_PASSWORD
ARG REDIS_HOST
ARG REDIS_PORT
ARG GOOGLE_SERVICE_ACCOUNT_EMAIL
ARG GOOGLE_PRIVATE_KEY
ARG GOOGLE_SHEET_ID

COPY apps/back /app

WORKDIR "/app"


RUN npm ci

RUN npm run build

EXPOSE 5000

ENTRYPOINT ["npm", "run", "start:prod"]
